function getCurrentTabUrl(t){var e={active:!0,currentWindow:!0};chrome.tabs.query(e,function(e){var o=e[0],r=o.url;console.assert("string"==typeof r,"tab.url should be a string"),t(r)})}function onSubmit(){resourceData.url=document.getElementById("urlInput").value,resourceData.title=document.getElementById("titleInput").value,resourceData.summary=document.getElementById("summaryInput").value,resourceData.category=document.getElementById("categoryInput").value;var t=document.getElementById("tagsInput").value;t=t.split(" "),t.length>0&&(resourceData.tags=t),$.post("http://hack-source.herokuapp.com/api/resources",resourceData),$(".form-group").fadeOut(600),$("#submit").fadeOut(600),$(".container").animate({height:"120px"},800),$(".title").text("Resource submitted!").css({"font-size":"20px","padding-top":"5px"}),$(".container").append('<h5 class="form-text text-muted">Visit <a target="_blank" href="http://hack-source.herokuapp.com/">HackSource</a> to see your resources.</h5>'),$("h5").css({"font-size":"15px","font-weight":"600","text-align":"center"})}function getCookies(t,e){chrome.cookies.get({url:t,name:e},function(t){t?(ID=t.value,resourceData.UserId=ID,$(".form-control").prop("disabled",!1),$("#submit").show(),$("#loginHelp").hide()):($(".form-control").prop("disabled",!0),$("#submit").hide(),$("#loginHelp").show())})}var resourceData={url:"",tags:[],title:"",imgUrl:"",summary:"",UserId:null,category:""};document.addEventListener("DOMContentLoaded",function(){$.get("http://hack-source.herokuapp.com/api/categories",function(t){t.forEach(function(t){$("#categoryInput").append($("<option/>",{value:t.title,text:t.title}))})}),getCookies("http://hack-source.herokuapp.com","HSid"),getCurrentTabUrl(function(t){$.get(t,function(e){resourceData.imgUrl=$(e).filter('meta[property="og:image"]').attr("content")||"https://i.stack.imgur.com/Mmww2.png";var o=$(e).filter("meta[name=description]").attr("content")||"",r=$(e).filter("title").text()||"";document.getElementById("urlInput").value=t,document.getElementById("summaryInput").value=o,document.getElementById("titleInput").value=r})}),$("#submit").click(function(t){onSubmit(),t.preventDefault()})});